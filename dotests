#!/bin/sh
#
#	tests

TIME="/usr/bin/time sleep 1 2>&1 | awk '{print $3 " " $4}'"

# 114 is lengthy >13m

# function add_to_summary, file tag.c, line 382. Abort trap: 6
traps="114|120|121|133|149|163"	

longones="110"

for i in `seq 164`
do
	case $i in
	$longones|$traps)
		continue;	# skip this one
	esac

	./tag "(100)^$i" 3 00 1101 | tee tests/$i.new || {
		echo "error in test $i" 1>&2
		continue
	}
	if [ ! -s tests/$i ]
	then
		mv tests/$i.new tests/$i
	else
		diff tests/$i tests/$i.new
		mv tests/$i.new tests/$i
	fi
done

exit 0

TESTS="5 13 14 22 25 46 47 54 63 65 70 74 78 80 91 93 106"
